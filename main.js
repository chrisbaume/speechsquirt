/******/ (function(modules) { // webpackBootstrap
/******/ 	// The module cache
/******/ 	var installedModules = {};
/******/
/******/ 	// The require function
/******/ 	function __webpack_require__(moduleId) {
/******/
/******/ 		// Check if module is in cache
/******/ 		if(installedModules[moduleId]) {
/******/ 			return installedModules[moduleId].exports;
/******/ 		}
/******/ 		// Create a new module (and put it into the cache)
/******/ 		var module = installedModules[moduleId] = {
/******/ 			i: moduleId,
/******/ 			l: false,
/******/ 			exports: {}
/******/ 		};
/******/
/******/ 		// Execute the module function
/******/ 		modules[moduleId].call(module.exports, module, module.exports, __webpack_require__);
/******/
/******/ 		// Flag the module as loaded
/******/ 		module.l = true;
/******/
/******/ 		// Return the exports of the module
/******/ 		return module.exports;
/******/ 	}
/******/
/******/
/******/ 	// expose the modules object (__webpack_modules__)
/******/ 	__webpack_require__.m = modules;
/******/
/******/ 	// expose the module cache
/******/ 	__webpack_require__.c = installedModules;
/******/
/******/ 	// define getter function for harmony exports
/******/ 	__webpack_require__.d = function(exports, name, getter) {
/******/ 		if(!__webpack_require__.o(exports, name)) {
/******/ 			Object.defineProperty(exports, name, { enumerable: true, get: getter });
/******/ 		}
/******/ 	};
/******/
/******/ 	// define __esModule on exports
/******/ 	__webpack_require__.r = function(exports) {
/******/ 		if(typeof Symbol !== 'undefined' && Symbol.toStringTag) {
/******/ 			Object.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });
/******/ 		}
/******/ 		Object.defineProperty(exports, '__esModule', { value: true });
/******/ 	};
/******/
/******/ 	// create a fake namespace object
/******/ 	// mode & 1: value is a module id, require it
/******/ 	// mode & 2: merge all properties of value into the ns
/******/ 	// mode & 4: return value when already ns object
/******/ 	// mode & 8|1: behave like require
/******/ 	__webpack_require__.t = function(value, mode) {
/******/ 		if(mode & 1) value = __webpack_require__(value);
/******/ 		if(mode & 8) return value;
/******/ 		if((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;
/******/ 		var ns = Object.create(null);
/******/ 		__webpack_require__.r(ns);
/******/ 		Object.defineProperty(ns, 'default', { enumerable: true, value: value });
/******/ 		if(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));
/******/ 		return ns;
/******/ 	};
/******/
/******/ 	// getDefaultExport function for compatibility with non-harmony modules
/******/ 	__webpack_require__.n = function(module) {
/******/ 		var getter = module && module.__esModule ?
/******/ 			function getDefault() { return module['default']; } :
/******/ 			function getModuleExports() { return module; };
/******/ 		__webpack_require__.d(getter, 'a', getter);
/******/ 		return getter;
/******/ 	};
/******/
/******/ 	// Object.prototype.hasOwnProperty.call
/******/ 	__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };
/******/
/******/ 	// __webpack_public_path__
/******/ 	__webpack_require__.p = "";
/******/
/******/
/******/ 	// Load entry module and return exports
/******/ 	return __webpack_require__(__webpack_require__.s = "./src/index.js");
/******/ })
/************************************************************************/
/******/ ({

/***/ "./src/index.js":
/*!**********************!*\
  !*** ./src/index.js ***!
  \**********************/
/*! no exports provided */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var _modules_squirt_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./modules/squirt.js */ \"./src/modules/squirt.js\");\n\n\nObject(_modules_squirt_js__WEBPACK_IMPORTED_MODULE_0__[\"default\"])();\n\n\n//# sourceURL=webpack:///./src/index.js?");

/***/ }),

/***/ "./src/modules/player.js":
/*!*******************************!*\
  !*** ./src/modules/player.js ***!
  \*******************************/
/*! exports provided: play, pause, getCurrentTime, setCurrentTime, getSpeed, setSpeed, init */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"play\", function() { return play; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"pause\", function() { return pause; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"getCurrentTime\", function() { return getCurrentTime; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"setCurrentTime\", function() { return setCurrentTime; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"getSpeed\", function() { return getSpeed; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"setSpeed\", function() { return setSpeed; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"init\", function() { return init; });\nvar audioPlayer;\n\nfunction play() {\n  audioPlayer.play();\n}\n\nfunction pause() {\n  audioPlayer.pause();\n}\n\nfunction getCurrentTime() {\n  return audioPlayer.currentTime;\n}\n\nfunction setCurrentTime(time) {\n  audioPlayer.currentTime = time;\n}\n\nfunction getSpeed() {\n  return audioPlayer.playbackRate;\n}\n\nfunction setSpeed(rate) {\n  audioPlayer.playbackRate = rate;\n}\n\nfunction init() {\n  audioPlayer = document.getElementsByTagName('audio')[0];\n}\n\n\n//# sourceURL=webpack:///./src/modules/player.js?");

/***/ }),

/***/ "./src/modules/squirt.js":
/*!*******************************!*\
  !*** ./src/modules/squirt.js ***!
  \*******************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"default\", function() { return squirt; });\n/* harmony import */ var _player_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./player.js */ \"./src/modules/player.js\");\n\n\nfunction launch(Keen){\n  Keen.addEvent('load');\n\n  on('mousemove', function(){\n    document.querySelector('.sq .modal').style.cursor = 'auto';\n  });\n\n  (function makeSquirt(read, makeGUI) {\n\n    on('squirt.again', startSquirt);\n    injectStylesheet(sq.host + 'font-awesome.css');\n    injectStylesheet(sq.host + 'squirt.css', function stylesLoaded(){\n      makeGUI();\n      startSquirt();\n    });\n\n    function startSquirt(){\n      Keen.addEvent('start');\n      _player_js__WEBPACK_IMPORTED_MODULE_0__[\"init\"]();\n      showGUI();\n      getText(read);\n    };\n\n    function getText(read){\n      // text source: demo\n      if(window.squirtText) return read(window.squirtText);\n\n      // text source: selection\n      var selection = window.getSelection();\n      if(selection.type == 'Range') {\n        var container = document.createElement(\"div\");\n        for (var i = 0, len = selection.rangeCount; i < len; ++i) {\n          container.appendChild(selection.getRangeAt(i).cloneContents());\n        }\n        return read(container.textContent);\n      }\n\n      read(document.getElementById('transcript').innerHTML);\n    };\n  })(makeRead(makeTextToNodes(wordToNode)), makeGUI);\n\n  function makeRead(textToNodes) {\n    sq.paused = true;\n    var nodeIdx,\n        nodes,\n        lastNode,\n        nextNodeTimeoutId;\n\n    function incrememntNodeIdx(increment){\n      var ret = nodeIdx;\n      nodeIdx += increment || 1;\n      nodeIdx = Math.max(0, nodeIdx);\n      prerender();\n      return ret;\n    };\n\n    var _speed;\n    function speed(speed){\n      _speed = speed;\n    };\n\n    (function readerEventHandlers(){\n      on('squirt.close', function(){\n        sq.closed = true;\n        clearTimeout(nextNodeTimeoutId);\n        _player_js__WEBPACK_IMPORTED_MODULE_0__[\"pause\"]();\n        Keen.addEvent('close');\n      });\n\n      on('squirt.speed.adjust', function(e){\n        dispatch('squirt.speed', {value: e.value + _speed});\n      });\n\n      on('squirt.speed', function(e){\n        sq.speed = Number(e.value);\n        speed(e.value);\n        _player_js__WEBPACK_IMPORTED_MODULE_0__[\"setSpeed\"](sq.speed);\n        dispatch('squirt.speed.after');\n        e.notForKeen == undefined && Keen.addEvent('speed', {'speed': sq.speed});\n      });\n\n      on('squirt.pause', pause);\n      on('squirt.play', play);\n\n      on('squirt.play.toggle', function(){\n        dispatch(sq.paused ? 'squirt.play' : 'squirt.pause');\n      });\n\n      on('squirt.rewind', function(e){\n        !sq.paused && clearTimeout(nextNodeTimeoutId);\n        let newTime = Math.max(_player_js__WEBPACK_IMPORTED_MODULE_0__[\"getCurrentTime\"]() - e.seconds, 0);\n        while(nodes[nodeIdx].start > newTime) {\n          if (nodeIdx==0) break;\n          incrememntNodeIdx(-1);\n        }\n        _player_js__WEBPACK_IMPORTED_MODULE_0__[\"setCurrentTime\"](newTime);\n        nextNode(true);\n        Keen.addEvent('rewind');\n      });\n    })();\n\n    function pause(){\n      sq.paused = true;\n      dispatch('squirt.pause.after');\n      clearTimeout(nextNodeTimeoutId);\n      _player_js__WEBPACK_IMPORTED_MODULE_0__[\"pause\"]();\n      Keen.addEvent('pause');\n    };\n\n    function play(e){\n      sq.paused = false;\n      dispatch('squirt.pause.after');\n      document.querySelector('.sq .speed-selector').style.display = 'none'\n      nextNode(e.jumped);\n      _player_js__WEBPACK_IMPORTED_MODULE_0__[\"play\"]();\n      e.notForKeen === undefined && Keen.addEvent('play');\n    };\n\n    var toRender;\n    function prerender(){\n      toRender = nodes[nodeIdx];\n      if(toRender == null) return;\n      prerenderer.appendChild(toRender);\n      nodes[nodeIdx].center();\n    }\n\n    function finalWord(){\n      Keen.addEvent('final-word');\n      toggle(document.querySelector('.sq .reader'));\n      toggle(finalWordContainer);\n      return;\n    };\n\n    var delay, jumped, nextIdx;\n    function nextNode(jumped) {\n      lastNode && lastNode.remove();\n\n      nextIdx = incrememntNodeIdx();\n      if(nextIdx >= nodes.length) return finalWord();\n\n      lastNode = nodes[nextIdx];\n      wordContainer.appendChild(lastNode);\n      lastNode.instructions && invoke(lastNode.instructions);\n      if(sq.paused) return;\n      let timeout = (nodes[nextIdx+1].start - _player_js__WEBPACK_IMPORTED_MODULE_0__[\"getCurrentTime\"]())/sq.speed*1000;\n      nextNodeTimeoutId = setTimeout(nextNode, timeout);\n    };\n\n    var waitAfterShortWord = 1.2;\n    var waitAfterComma = 2;\n    var waitAfterPeriod = 3;\n    var waitAfterParagraph = 3.5;\n    var waitAfterLongWord = 1.5;\n    function getDelay(node, jumped){\n      var word = node.word;\n      if(jumped) return waitAfterPeriod;\n      if(word == \"Mr.\" ||\n          word == \"Mrs.\" ||\n          word == \"Ms.\") return 1;\n      var lastChar = word[word.length - 1];\n      if(lastChar.match('”|\"')) lastChar = word[word.length - 2];\n      if(lastChar == '\\n') return waitAfterParagraph;\n      if('.!?'.indexOf(lastChar) != -1) return waitAfterPeriod;\n      if(',;:–'.indexOf(lastChar) != -1) return waitAfterComma;\n      if(word.length < 4) return waitAfterShortWord;\n      if(word.length > 11) return waitAfterLongWord;\n      return 1;\n    };\n\n    function showTweetButton(words, minutes){\n      var html = \"<div>You just read \" + words + \" words in \" + minutes + \" minutes!</div>\";\n      var tweetString = \"I read \" + words + \" words in \" + minutes + \" minutes without breaking a sweat&mdash;www.squirt.io turns your browser into a speed reading machine!\";\n      var paramStr = encodeURI(\"url=squirt.io&user=squirtio&size=large&text=\" +\n          tweetString);\n      html += '<iframe class=\\\"tweet-button\\\" '\n               + 'allowtransparency=\\\"true\\\" frameborder=\\\"0\\\"'\n               + ' scrolling=\\\"no\\\"'\n               + ' src=\\\"https://platform.twitter.com/widgets/tweet_button.html?'\n               + paramStr + '\\\"'\n               + ' style=\\\"width:120px; height:20px;\\\"></iframe>';\n      finalWordContainer.innerHTML = html;\n    };\n\n    function showInstallLink(){\n      finalWordContainer.innerHTML = \"<a class='install' href='/install.html'>Install Squirt</a>\";\n    };\n\n    function readabilityFail(){\n        Keen.addEvent('readability-fail');\n        var modal = document.querySelector('.sq .modal');\n        modal.innerHTML = '<div class=\"error\">Oops! This page is too hard for Squirt to read. We\\'ve been notified, and will do our best to resolve the issue shortly.</div>';\n    };\n\n    dispatch('squirt.speed', {value: 1.0, notForKeen: true});\n\n    var wordContainer,\n        prerenderer,\n        finalWordContainer;\n    function initDomRefs(){\n      wordContainer = document.querySelector('.sq .word-container');\n      invoke(wordContainer.querySelectorAll('.sq .word'), 'remove');\n      prerenderer = document.querySelector('.sq .word-prerenderer');\n      finalWordContainer = document.querySelector('.sq .final-word');\n      document.querySelector('.sq .reader').style.display = 'block';\n      document.querySelector('.sq .final-word').style.display = 'none';\n    };\n\n    return function read(text) {\n      initDomRefs();\n      if(!text) return readabilityFail();\n\n      nodes = textToNodes(text);\n      nodeIdx = 0;\n\n      prerender();\n      //dispatch('squirt.play');\n    };\n  };\n\n  function makeTextToNodes(wordToNode) {\n    return function textToNodes(text) {\n\n      let parser = new DOMParser();\n      let html = parser.parseFromString(text, 'text/html');\n      let words = Array.from(html.getElementsByTagName('span'));\n      return words.map(wordToNode);\n\n      //text = \"3\\n 2\\n 1\\n \" + text.trim('\\n').replace(/\\s+\\n/g,'\\n');\n      //return text\n             //.replace(/[\\,\\.\\!\\:\\;](?![\\\"\\'\\)\\]\\}])/g, \"$& \")\n             //.split(/[\\s]+/g)\n             //.filter(function(word){ return word.length; })\n             //.map(wordToNode);\n    };\n  };\n\n  var instructionsRE = /#SQ(.*)SQ#/;\n  function parseSQInstructionsForWord(word, node){\n    var match = word.match(instructionsRE);\n    if(match && match.length > 1){\n      node.instructions = [];\n      match[1].split('#')\n      .filter(function(w){ return w.length; })\n      .map(function(instruction){\n        var val = Number(instruction.split('=')[1]);\n        node.instructions.push(function(){\n          dispatch('squirt.speed', {value: val, notForKeen: true})\n        });\n      });\n      return word.replace(instructionsRE, '');\n    };\n    return word;\n  };\n\n  // ORP: Optimal Recgonition Point\n  function getORPIndex(word){\n    var length = word.length;\n    var lastChar = word[word.length - 1];\n    if(lastChar == '\\n'){\n      lastChar = word[word.length - 2];\n      length--;\n    }\n    if(',.?!:;\"'.indexOf(lastChar) != -1) length--;\n    return length <= 1 ? 0 :\n      (length == 2 ? 1 :\n          (length == 3 ? 1 :\n              Math.floor(length / 2) - 1));\n  };\n\n  function wordToNode(word) {\n    var node = makeDiv({'class': 'word'});\n    //node.word = parseSQInstructionsForWord(word, node);\n    node.word = word.innerHTML;\n    node.start = word.attributes.getNamedItem('start').value;\n    node.end = word.attributes.getNamedItem('end').value;\n\n    var orpIdx = getORPIndex(node.word);\n\n    node.word.split('').map(function charToNode(char, idx) {\n      var span = makeEl('span', {}, node);\n      span.textContent = char;\n      if(idx == orpIdx) span.classList.add('orp');\n    });\n\n    node.center = (function(orpNode) {\n      var val = orpNode.offsetLeft + (orpNode.offsetWidth / 2);\n      node.style.left = \"-\" + val + \"px\";\n    }).bind(null, node.children[orpIdx]);\n\n    return node;\n  };\n\n  var disableKeyboardShortcuts;\n  function showGUI(){\n    blur();\n    document.querySelector('.sq').style.display = 'block';\n    disableKeyboardShortcuts = on('keydown', handleKeypress);\n  };\n\n  function hideGUI(){\n    unblur();\n    document.querySelector('.sq').style.display = 'none';\n    disableKeyboardShortcuts && disableKeyboardShortcuts();\n  };\n\n  var keyHandlers = {\n      32: dispatch.bind(null, 'squirt.play.toggle'),\n      27: dispatch.bind(null, 'squirt.close'),\n      38: dispatch.bind(null, 'squirt.speed.adjust', {value: 0.2}),\n      40: dispatch.bind(null, 'squirt.speed.adjust', {value: -0.2}),\n      37: dispatch.bind(null, 'squirt.rewind', {seconds: 2})\n  };\n\n  function handleKeypress(e){\n    var handler = keyHandlers[e.keyCode];\n    handler && (handler(), e.preventDefault())\n    return false;\n  };\n\n  function blur(){\n    map(document.body.children, function(node){\n      if(!node.classList.contains('sq'))\n        node.classList.add('sq-blur');\n    });\n  };\n\n  function unblur(){\n    map(document.body.children, function(node){\n      node.classList.remove('sq-blur');\n    });\n  }\n\n  function makeGUI(){\n    var squirt = makeDiv({class: 'sq'}, document.body);\n    squirt.style.display = 'none';\n    on('squirt.close', hideGUI);\n    var obscure = makeDiv({class: 'sq-obscure'}, squirt);\n    on(obscure, 'click', function(){\n      dispatch('squirt.close');\n    });\n\n    on(window, 'orientationchange', function(){\n      Keen.addEvent('orientation-change', {'orientation': window.orientation});\n    });\n\n    var modal = makeDiv({'class': 'modal'}, squirt);\n\n    var controls = makeDiv({'class':'controls'}, modal);\n    var reader = makeDiv({'class': 'reader'}, modal);\n    var wordContainer = makeDiv({'class': 'word-container'}, reader);\n    makeDiv({'class': 'focus-indicator-gap'}, wordContainer);\n    makeDiv({'class': 'word-prerenderer'}, wordContainer);\n    makeDiv({'class': 'final-word'}, modal);\n    var keyboard = makeDiv({'class': 'keyboard-shortcuts'}, reader);\n    keyboard.innerText = \"Keys: Space, Esc, Up, Down\";\n\n    (function make(controls){\n\n      // this code is suffering from delirium\n      (function makeSpeedSelect(){\n\n        // create the ever-present left-hand side button\n        var control = makeDiv({'class': 'sq speed sq control'}, controls);\n        var speedLink = makeEl('a', {}, control);\n        on('squirt.speed.after', function() {\n          speedLink.textContent = 'x'+parseFloat(sq.speed).toFixed(1);\n        });\n        dispatch('squirt.speed.after');\n        on(control, 'click', function(){\n          toggle(speedSelector) ?\n            dispatch('squirt.pause') :\n            dispatch('squirt.play');\n        });\n\n        // create the custom selector\n        var speedSelector = makeDiv({'class': 'sq speed-selector'}, controls);\n        speedSelector.style.display = 'none';\n        var plus50OptData = {add: 0, sign: \"+\"};\n        var datas = [];\n        for(var speed = 0.4; speed <= 2; speed += 0.2){\n          var opt = makeDiv({'class': 'sq speed-option'}, speedSelector);\n          var a = makeEl('a', {}, opt);\n          a.data = { basespeed: speed };\n          a.data.__proto__ = plus50OptData;\n          datas.push(a.data);\n          bind(\"{{speed}}\",  a.data, a);\n          on(opt, 'click', function(e){\n            dispatch('squirt.speed', {value: e.target.firstChild.data.speed});\n            dispatch('squirt.play');\n            speedSelector.style.display = 'none';\n          });\n        };\n\n        // create the last option for the custom selector\n        var plus50Opt = makeDiv({'class': 'sq speed-option sq speed-plus-50'}, speedSelector);\n        var a = makeEl('a', {}, plus50Opt);\n        bind(\"{{sign}}50\", plus50OptData, a);\n        on(plus50Opt, 'click', function(){\n          datas.map(function(data){\n            data.speed = data.basespeed + data.add;\n          });\n          var toggle = plus50OptData.sign == '+';\n          plus50OptData.sign = toggle ? '-' : '+';\n          plus50OptData.add = toggle ? 0 : 50;\n          dispatch('squirt.els.render');\n        });\n        dispatch('click', {}, plus50Opt);\n      })();\n\n      (function makeRewind(){\n        var container = makeEl('div', {'class': 'sq rewind sq control'}, controls);\n        var a = makeEl('a', {}, container);\n        a.href = '#';\n        on(container, 'click', function(e){\n          dispatch('squirt.rewind', {seconds: 2});\n          e.preventDefault();\n        });\n        a.innerHTML = \"<i class='fa fa-backward'></i> 2s\";\n      })();\n\n      (function makePause(){\n        var container = makeEl('div', {'class': 'sq pause control'}, controls);\n        var a = makeEl('a', {'href': '#'}, container);\n        var pauseIcon = \"<i class='fa fa-pause'></i>\";\n        var playIcon = \"<i class='fa fa-play'></i>\";\n        function updateIcon(){\n          a.innerHTML = sq.paused ? playIcon : pauseIcon;\n        }\n        on('squirt.pause.after', updateIcon);\n        on(container, 'click', function(clickEvt){\n          dispatch('squirt.play.toggle');\n          clickEvt.preventDefault();\n        });\n        updateIcon();\n      })();\n    })(controls);\n  };\n\n  // utilites\n\n  function map(listLike, f){\n    listLike = Array.prototype.slice.call(listLike); // for safari\n    return Array.prototype.map.call(listLike, f);\n  }\n\n  // invoke([f1, f2]); // calls f1() and f2()\n  // invoke([o1, o2], 'func'); // calls o1.func(), o2.func()\n  // args are applied to both invocation patterns\n  function invoke(objs, funcName, args){\n    args = args || [];\n    var objsAreFuncs = false;\n    switch(typeof funcName){\n      case \"object\":\n      args = funcName;\n      break;\n      case \"undefined\":\n      objsAreFuncs = true;\n    };\n    return map(objs, function(o){\n      return objsAreFuncs ? o.apply(null, args) : o[funcName].apply(o, args);\n    });\n  }\n\n  function makeEl(type, attrs, parent) {\n    var el = document.createElement(type);\n    for(var k in attrs){\n      if(!attrs.hasOwnProperty(k)) continue;\n      el.setAttribute(k, attrs[k]);\n    }\n    parent && parent.appendChild(el);\n    return el;\n  };\n\n  // data binding... *cough*\n  function bind(expr, data, el){\n    el.render = render.bind(null, expr, data, el);\n    return on('squirt.els.render', function(){\n      el.render();\n    });\n  };\n\n  function render(expr, data, el){\n    var match, rendered = expr;\n    expr.match(/{{[^}]+}}/g).map(function(match){\n      var val = data[match.substr(2, match.length - 4)];\n      rendered = rendered.replace(match, val == undefined ? '' : val);\n    });\n    el.textContent = rendered;\n  };\n\n  function makeDiv(attrs, parent){\n    return makeEl('div', attrs, parent);\n  };\n\n  function injectStylesheet(url, onLoad){\n    var el = makeEl('link', {\n      rel: 'stylesheet',\n      href: url,\n      type: 'text/css'\n    }, document.head);\n    function loadHandler(){\n      onLoad();\n      el.removeEventListener('load', loadHandler)\n    };\n    onLoad && on(el, 'load', loadHandler);\n  };\n\n\n  function on(bus, evts, cb){\n    if(cb === undefined){\n      cb = evts;\n      evts = bus;\n      bus = document;\n    }\n    evts = typeof evts == 'string' ? [evts] : evts;\n    var removers = evts.map(function(evt){\n      bus.addEventListener(evt, cb);\n      return function(){\n        bus.removeEventListener(evt, cb);\n      };\n    });\n    if(removers.length == 1) return removers[0];\n    return removers;\n  };\n\n  function dispatch(evt, attrs, dispatcher){\n    var evt = new Event(evt);\n    for(var k in attrs){\n      if(!attrs.hasOwnProperty(k)) continue\n      evt[k] = attrs[k];\n    }\n    (dispatcher || document).dispatchEvent(evt);\n  };\n\n  function toggle(el){\n    var s = window.getComputedStyle(el);\n    return (el.style.display = s.display == 'none' ? 'block' : 'none') == 'block';\n  };\n\n};\n\nfunction injectKeen(){\n  window.Keen=window.Keen||{configure:function(e){this._cf=e},addEvent:function(e,t,n,i){this._eq=this._eq||[],this._eq.push([e,t,n,i])},setGlobalProperties:function(e){this._gp=e},onChartsReady:function(e){this._ocrq=this._ocrq||[],this._ocrq.push(e)}};(function(){var e=document.createElement(\"script\");e.type=\"text/javascript\",e.async=!0,e.src=(\"https:\"==document.location.protocol?\"https://\":\"http://\")+\"cdnjs.cloudflare.com/ajax/libs/keen-js/5.0.5/keen.bundle.min.js\";var t=document.getElementsByTagName(\"script\")[0];t.parentNode.insertBefore(e,t)})();\n\n  var Keen = window.Keen;\n  var prod = {\n      projectId: \"531d7ffd36bf5a1ec4000000\",\n      writeKey: \"9bdde746be9a9c7bca138171c98d6b7a4b4ce7f9c12dc62f0c3404ea8c7b5415a879151825b668a5682e0862374edaf46f7d6f25772f2fa6bc29aeef02310e8c376e89beffe7e3a4c5227a3aa7a40d8ce1dcde7cf28c7071b2b0e3c12f06b513c5f92fa5a9cfbc1bebaddaa7c595734d\"\n  };\n  var dev = {\n    projectId: \"531aa8c136bf5a0f8e000003\",\n    writeKey: \"a863509cd0ba1c7039d54e977520462be277d525f29e98798ae4742b963b22ede0234c467494a263bd6d6b064413c29cd984e90e6e6a4468d36fed1b04bcfce6f19f50853e37b45cb283b4d0dfc4c6e7a9a23148b1696d7ea2624f1c907abfac23a67bbbead623522552de3fedced628\"\n  };\n\n  Keen.configure(sq.host.match('squirt.io') ? prod : dev);\n\n  function addon(name, input, output){\n    return { name: name, input: input, output: output};\n  }\n\n  function guid(){\n    return 'xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx'.replace(/[xy]/g, function(c) {\n      var r = Math.random()*16|0, v = c == 'x' ? r : (r&0x3|0x8);\n      return v.toString(16);\n    });\n  };\n\n  Keen.setGlobalProperties(function(){\n    var props = {\n      source: \"bookmarklet\",\n      userId: sq.userId || 'beta-user',\n      href: window.location.href,\n      rawUserAgent: \"${keen.user_agent}\",\n      sessionId: 'sq-sesh-' + guid(),\n      ip: \"${keen.ip}\",\n      keen: { addons: [] },\n      referrer: document.referrer,\n      app_version: sq.version\n    };\n    var push = Array.prototype.push.bind(props.keen.addons);\n    push(addon(\"keen:ip_to_geo\", { ip: \"ip\" }, \"geo\"));\n    push(addon(\"keen:ua_parser\", { ua_string: \"rawUserAgent\" }, \"userAgent\"));\n    return props;\n  });\n\n  return Keen;\n};\n\nfunction squirt() {\n  var sq = window.sq;\n  sq.version = '0.0.1';\n  sq.host = document.scripts[document.scripts.length - 1].src.match(/\\/\\/.*\\//)[0];\n  launch(injectKeen());\n};\n\n\n\n//# sourceURL=webpack:///./src/modules/squirt.js?");

/***/ })

/******/ });